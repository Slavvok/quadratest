{% extends 'newapi/base.html' %}
{% load rest_framework %}
{% block content %}
    <h1>Upload</h1>
    <form action="{% url 'newapi:uploadtext' %}" id="textForm" method="post">
        {% csrf_token %}
        {% render_form serializer %}
        <input type="submit" name="submit" value="Submit" formmethod="post"/>
    </form>
    <br>
    <a  href="{% url 'newapi:gettext' %}" type="button" name="button">Results</a>
    <script>
      $(function(){
      var $form = $("#textForm");
      form.submit(function(e)){
        $.ajax({
          type: form.attr("method"),
          url: form.attr("action"),
          data: $form.serialize(),
          success: function(results) {
            alert(results);
          }
          });
        });
      });
    </script>
{% endblock %}
